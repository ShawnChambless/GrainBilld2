angular.module("GrainBilld",["ui.router","angular-loading-bar"]).config(["$stateProvider","$urlRouterProvider",function(e,n){n.otherwise("/login"),e.state("login",{url:"/login",controller:"loginCtrl",templateUrl:"app/login/loginTmpl.html"}).state("home",{url:"/home",controller:"homeCtrl",templateUrl:"app/home/homeTmpl.html",resolve:{getGrain:["homeService",function(e){return e.getGrain().then(function(e){return{grain:e.data}})}],getHops:["homeService",function(e){return e.getHops().then(function(e){return{hops:e.data}})}],getYeast:["homeService",function(e){return e.getYeast().then(function(e){return{yeast:e.data}})}]}}).state("new-batch",{url:"/NewBatch",controller:"newBatchController",templateUrl:"app/newBatch/newBatchTmpl.html",resolve:{getGrain:["homeService",function(e){return e.getGrain().then(function(e){return e.data})}],getHops:["homeService",function(e){return e.getHops().then(function(e){return e.data})}],getYeast:["homeService",function(e){return e.getYeast().then(function(e){return e.data})}]}}).state("ingredientInfo",{url:"/IngredientInfo",controller:"ingredientInfoController",templateUrl:"app/ingredientInfo/ingredientInfoTmpl.html"}).state("myRecipes",{url:"/MyRecipes",controller:"myRecipesController",templateUrl:"app/myRecipes/myRecipesTmpl.html"}).state("communityRecipes",{url:"/CommunityRecipes",controller:"communityRecipesController",templateUrl:"app/CommunityRecipes/communityRecipesTmpl.html"})}]),$(document).ready(function(){var e=$("#js-mobile-menu").unbind();$("#js-navigation-menu").removeClass("show"),e.on("click",function(e){e.preventDefault(),$("#js-navigation-menu").slideToggle(function(){$("#js-navigation-menu").is(":hidden")&&$("#js-navigation-menu").removeAttr("style")})})}),angular.module("GrainBilld").controller("communityRecipesController",["$scope","communityRecipesService",function(e,n){}]),angular.module("GrainBilld").service("communityRecipesService",["$http",function(e){}]),angular.module("GrainBilld").controller("ingredientInfoController",["$scope","ingredientInfoService",function(e,n){}]),angular.module("GrainBilld").service("ingredientInfoService",["$http",function(e){}]),angular.module("GrainBilld").controller("homeCtrl",["$scope","homeService","getGrain","getHops","getYeast",function(e,n,t,o,i){e.grain=t.grain,e.hops=o.hops,e.yeast=i.yeast}]),angular.module("GrainBilld").service("homeService",["$http","$q",function(e,n){this.getGrain=function(){return e({method:"GET",url:"http://localhost:8080/api/database/ingredients/grain"})},this.getHops=function(){return e({method:"GET",url:"http://localhost:8080/api/database/ingredients/hops"})},this.getYeast=function(){return e({method:"GET",url:"http://localhost:8080/api/database/ingredients/yeast"})}}]),angular.module("GrainBilld").controller("loginCtrl",["$scope","loginService","$state",function(e,n,t){e.showLogin=!0,e.showRegister=!1,e.register=function(o,i,r,a){n.register(o,i,r,a).then(function(n){e.showSuccess=!0,t.go("home")})["catch"](function(n){e.showError=!0,t.go("login")})},e.login=function(o,i){n.login(o,i).then(function(n){e.showSuccess=!0,t.go("home"),e.email="",e.password="",e.showError=!1})["catch"](function(n){e.showError=!0,console.log(n),t.go("login")})},e.getCurrentUser=function(e){n.getCurrentUser().then(function(e){currUser===user,t.go("home")})["catch"](function(e){console.log(e)})}}]),angular.module("GrainBilld").service("loginService",["$http","$q",function(e,n){var t=null;this.currentUser=function(){return t},this.getCurrentUser=function(){var o=n.defer();return e({method:"GET",url:"http://localhost:8080/api/user/"}).success(function(e){t=e,o.resolve(e)}).error(function(e){o.reject(e)}),o.promise},this.register=function(t,o,i,r){var a=n.defer();return e({method:"POST",url:"http://localhost:8080/auth/local/signup",data:{firstName:t,lastName:o,email:i,password:r}}).then(function(e){a.resolve(e.data)},function(e){a.reject(e)}),a.promise},this.login=function(o,i){var r=n.defer();return e({method:"POST",url:"http://localhost:8080/auth/local/login",data:{email:o,password:i}}).then(function(e){t=e.data,r.resolve(e.data)},function(e){r.reject(e)}),r.promise}}]),angular.module("GrainBilld").controller("myRecipesController",["$scope","myRecipesService",function(e,n){}]),angular.module("GrainBilld").service("myRecipesService",["$http",function(e){}]),angular.module("GrainBilld").controller("newBatchController",["$scope","newBatchService","homeService","getGrain","getHops","getYeast",function(e,n,t,o,i,r){e.grain=o,e.hops=i,e.yeast=r,e.recipeGrain=n.grainInRecipe,e.recipeHops=n.hopsInRecipe,e.recipeYeast=n.yeastInRecipe,e.showGrainData=function(){e.showGrain=!0,e.showHops=!1,e.showYeast=!1},e.showHopsData=function(){e.showGrain=!1,e.showHops=!0,e.showYeast=!1},e.showYeastData=function(){e.showGrain=!1,e.showHops=!1,e.showYeast=!0},e.addGrainToRecipe=function(e){n.addGrainToRecipe(e),console.log(n.grainInRecipe)},e.addHopsToRecipe=function(e){n.addHopsToRecipe(e),console.log(n.hopsInRecipe)},e.addYeastToRecipe=function(e){n.addYeastToRecipe(e),console.log(n.yeastInRecipe)}}]),angular.module("GrainBilld").service("newBatchService",["$http",function(e){this.grainInRecipe=[{name:"GRAIN"}],this.hopsInRecipe=[],this.yeastInRecipe=[],this.addGrainToRecipe=function(e){-1===this.grainInRecipe.indexOf(e)&&this.grainInRecipe.push(e)},this.addHopsToRecipe=function(e){-1===this.hopsInRecipe.indexOf(e)&&this.hopsInRecipe.push(e)},this.addYeastToRecipe=function(e){-1===this.yeastInRecipe.indexOf(e)&&this.yeastInRecipe.push(e)}}]);